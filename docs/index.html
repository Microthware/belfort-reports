<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Overview — Daily Reports</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{--bg:#0b0f14;--card:#11161d;--muted:#8ea0b3;--text:#e7eef7;--green:#16a34a;--red:#dc2626;--border:#223142}
    html,body{background:var(--bg);color:var(--text);margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    .wrap{max-width:1100px;margin:28px auto 56px;padding:0 16px}
    h1{font-size:22px;margin:0 0 12px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
    .section-title{font-size:14px;font-weight:700;margin:6px 0 12px;letter-spacing:.3px;color:#cfe1f7}
    .muted{color:var(--muted);font-size:12px}
    a{color:#9ecbff;text-decoration:none}
    a:hover{text-decoration:underline}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 10px;border-bottom:1px solid var(--border);text-align:left;white-space:nowrap; vertical-align:middle}
    thead th{color:var(--muted);font-size:12px}
    .pill{display:inline-block;padding:2px 8px;border:1px solid var(--border);border-radius:999px;font-size:12px;margin-left:8px}
    .up{color:var(--green);border-color:rgba(22,163,74,.35)}
    .down{color:var(--red);border-color:rgba(220,38,38,.35)}

    /* circular win-rate */
    .ring{width:40px;height:40px;display:inline-block;position:relative}
    .ring svg{width:40px;height:40px;display:block}
    .ring .txt{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:11px}

    .footer-updated{position:fixed;right:12px;bottom:10px;color:var(--muted);font-size:12px}
    .bots-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .summary{display:flex;gap:16px;align-items:center}
    .summary .label{font-size:12px;color:var(--muted)}
  </style>

<style>
/* portfolios-mini (no-fetch) */
.portfolios-card{cursor:pointer}
.portfolios-card .mini-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:16px;
  margin-top:10px;
}
.mini-card{
  background:rgba(255,255,255,.02);
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  display:flex;
  gap:10px;
  align-items:center;
}
.mini-pie{width:120px;height:120px;position:relative;flex:0 0 auto}
.mini-legend{display:flex;flex-direction:column;gap:4px;font-size:12px}
.mini-legend .row{display:flex;align-items:center;gap:6px}
.mini-legend .sw{width:9px;height:9px;border-radius:2px;display:inline-block}
.mini-title{font-weight:700;margin-bottom:6px;color:#cfe1f7}
@media (max-width:520px){
  .mini-card{flex-direction:column;align-items:flex-start}
}
</style>

  <style>
    .section-title{display:flex;align-items:center;gap:8px}
    .title-ico{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;opacity:.85}
    .title-ico svg{display:block;width:18px;height:18px}
  </style>
<style>
  /* price badge next to ticker */
  .gap-price{
    font-weight:700;
    font-variant-numeric: tabular-nums;
    letter-spacing:.2px;
  }
  .gap-price.up{ color:#FFFFFF }
  .gap-price.down{ color:#FFFFFF }
</style>
<style>
/* overview-icons-and-donuts */
.section-title{display:flex;align-items:center;gap:8px}
.title-ico{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;opacity:.9}
.title-ico svg{display:block;width:18px;height:18px}
.portfolios-card .mini-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:10px}
.mini-card{background:rgba(255,255,255,.02);border:1px solid var(--border,#223142);border-radius:12px;padding:10px;display:flex;gap:10px;align-items:center}
.mini-pie{width:120px;height:120px;position:relative;flex:0 0 auto}
.mini-legend{display:flex;flex-direction:column;gap:4px;font-size:12px}
.mini-legend .row{display:flex;align-items:center;gap:6px}
.mini-legend .sw{width:9px;height:9px;border-radius:2px;display:inline-block}
.mini-title{font-weight:700;margin-bottom:6px;color:#cfe1f7}
</style>

<!-- NEW: gap-ups mini-candles styles -->
<style>
.gaps-grid{
  margin-top:8px;
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(240px,1fr));
  gap:12px;
}
.gap-card{
  background:rgba(255,255,255,.02);
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
}
.gap-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.gap-sym{font-weight:700}
.gap-canvas{width:100%;height:120px;display:block}
.gap-streak{
  margin-left:8px;
  font-size:11px;
  padding:2px 6px;
  border-radius:999px;
  border:1px solid rgba(250,204,21,.35); /* amber */
  background:rgba(250,204,21,.08);
  color:#facc15;
  font-variant-numeric: tabular-nums;
  letter-spacing:.2px;
}
</style>
<style>
  .hpmini-card{background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:12px;padding:10px;display:flex;flex-direction:column}
  .hpmini-title{font-weight:400;margin-bottom:6px;color:#cfe1f7;font-size: small;}
  .hpmini-wrap{
    max-height:240px;
    overflow:auto;
    border:1px solid var(--border);
    border-radius:8px;

    /* thin, black scrollbars */
    scrollbar-width: thin;                 /* Firefox */
    scrollbar-color: #000 transparent;     /* thumb | track */
  }
  .hpmini-wrap::-webkit-scrollbar{
    width:4px;                              /* Chrome/Edge/Safari */
  }
  .hpmini-wrap::-webkit-scrollbar-track{
    background: transparent;
  }
  .hpmini-wrap::-webkit-scrollbar-thumb{
    background:#000;
    border-radius:8px;
  }
  .hpmini-wrap table{width:100%;border-collapse:collapse}
  .hpmini-wrap thead th{position:sticky;top:0;background:rgb(26, 26, 26);color:var(--muted);font-size:12px}
  .hpmini-wrap th, .hpmini-wrap td{padding:8px 8px;border-bottom:1px solid var(--border);font-size:12px;white-space:nowrap}
  .hpmini-pct.up{color:#16a34a;font-weight:600}
  .hpmini-pct.down{color:#dc2626;font-weight:600}
</style>

</head>
<body>
  <div class="wrap">
    <h1>Overview</h1>

    <!-- Section 1: Bots (includes summary) -->
    <section class="card">
      <div class="bots-header">
        <div class="section-title" style="margin:0"><span class="title-ico" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="#9ecbff" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="8" width="18" height="10" rx="2"/><circle cx="8.5" cy="13" r="1.5"/><circle cx="15.5" cy="13" r="1.5"/><path d="M12 8V4"/><path d="M10 4h4"/></svg></span>Bots</div>
        <div class="summary">
          <div class="label">Total actions: <strong>36</strong></div>
          <div class="label">Avg win rate: <strong>45.24%</strong></div>
        </div>
      </div>
      <table>
        <thead>
          <tr>
            <th>Bot</th>
            <th>Universe</th>
            <th>Win Rate</th>
            <th>Avg Win</th>
            <th>Avg Loss</th>
            <th>Balance</th>
            <th>Trades</th>
            <th>Updated</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td><a href="bubbles.html"><strong>Bubbles</strong></a></td>
            <td class="muted">ALL</td>
            <td>
              <div class="ring" title="33.33%">
                <svg viewBox="0 0 40 40" role="img" aria-label="Win rate 33.33%">
                  <circle cx="20" cy="20" r="16" stroke="#2c3238" stroke-width="4" fill="none"></circle>
                  
                  
                  
                  <circle cx="20" cy="20" r="16" stroke="currentColor" stroke-width="4" fill="none"
                          stroke-dasharray="100.53" stroke-dashoffset="67.02"
                          transform="rotate(-90 20 20)"></circle>
                </svg>
                <div class="txt">33.33%</div>
              </div>
            </td>
            <td>4.17%</td>
            <td>-21.91%</td>
            <td>
              $7,472.34
              
                <span class="pill down">▼</span>
              
            </td>
            <td>18</td>
            <td class="muted">10/22/25 21:29</td>
          </tr>
          
          <tr>
            <td><a href="julian.html"><strong>Julian</strong></a></td>
            <td class="muted">ALL</td>
            <td>
              <div class="ring" title="57.14%">
                <svg viewBox="0 0 40 40" role="img" aria-label="Win rate 57.14%">
                  <circle cx="20" cy="20" r="16" stroke="#2c3238" stroke-width="4" fill="none"></circle>
                  
                  
                  
                  <circle cx="20" cy="20" r="16" stroke="currentColor" stroke-width="4" fill="none"
                          stroke-dasharray="100.53" stroke-dashoffset="43.08"
                          transform="rotate(-90 20 20)"></circle>
                </svg>
                <div class="txt">57.14%</div>
              </div>
            </td>
            <td>2.60%</td>
            <td>-19.12%</td>
            <td>
              $9,351.96
              
                <span class="pill down">▼</span>
              
            </td>
            <td>18</td>
            <td class="muted">10/22/25 21:35</td>
          </tr>
          
        </tbody>
      </table>
    </section>

    <!-- Section 2: Market Studies (at bottom) -->
    <section class="card" style="margin-top:14px;">
      <div class="section-title">Market Studies</div>
      <ul style="margin:6px 0 0; padding-left:16px; line-height:1.9;">
        <li><a href="gapups.html">Gap-Up History &amp; Outcomes</a></li>
      </ul>

      <!-- NEW: Today’s Gap-Ups list + 14-day mini candles -->
      <div class="section-title" style="margin-top:14px">Today's Gap-Ups</div>
      <div id="gapups-today" class="gaps-grid"></div>
    </section>

    <!-- Section 3: Portfolios -->
    <section class="portfolios-card card" style="margin-top:14px;">
      <div class="section-title">
        <span class="title-ico" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="#a7f3d0">
            <path d="M12 2c2.75 0 5 2.25 5 5s-2.25 5-5 5-5-2.25-5-5 2.25-5 5-5Zm-7 18c0-3.6 5.2-5.5 7-5.5s7 1.9 7 5.5v1H5v-1Z"/>
          </svg>
        </span>
        High Profile Portfolios</div>
      <div class="mini-grid" id="mini-portfolios"></div>
      <div class="muted" style="margin-top:8px">Click anywhere in this card to open detailed portfolios.</div>
    </section>
  </div>

  <div class="footer-updated">Updated 10/23/25 11:30</div>

<script>
// portfolios-mini render (no-fetch): uses same SECTIONS strategy as portfolios.html
(function(){
  const SECTIONS = [{"name":"Nancy Pelosi","holdings":[{"ticker":"NVDA","weight":0.26695374905492913},{"ticker":"PANW","weight":0.20012491371092336},{"ticker":"AAPL","weight":0.19963183327306794},{"ticker":"AVGO","weight":0.13349331054205976},{"ticker":"AMZN","weight":0.06659873113967325},{"ticker":"TEM","weight":0.06659873113967325},{"ticker":"VST","weight":0.06659873113967325}]},{"name":"Tommy Tuberville","holdings":[{"ticker":"ARKK","weight":0.4998152481832738},{"ticker":"ABNDX","weight":0.2502771277250893},{"ticker":"XBI","weight":0.2499076240916369}]},{"name":"Michael McCaul","holdings":[{"ticker":"FFRHX","weight":0.2222222222222222},{"ticker":"LDNXF","weight":0.08333333333333333},{"ticker":"VTEB","weight":0.05555555555555555},{"ticker":"DHR","weight":0.05555555555555555},{"ticker":"NSIT","weight":0.05555555555555555},{"ticker":"ATR","weight":0.05555555555555555},{"ticker":"AVGO","weight":0.05555555555555555},{"ticker":"WDAY","weight":0.05555555555555555},{"ticker":"ARTFX","weight":0.027777777777777776},{"ticker":"NOW","weight":0.027777777777777776},{"ticker":"CNM","weight":0.027777777777777776},{"ticker":"CSL","weight":0.027777777777777776},{"ticker":"PRI","weight":0.027777777777777776},{"ticker":"WTM","weight":0.027777777777777776},{"ticker":"MSA","weight":0.027777777777777776},{"ticker":"DXCM","weight":0.027777777777777776},{"ticker":"NFLX","weight":0.027777777777777776},{"ticker":"HWM","weight":0.027777777777777776},{"ticker":"PLXS","weight":0.027777777777777776},{"ticker":"ORCL","weight":0.027777777777777776},{"ticker":"GOOGL","weight":0.027777777777777776}]},{"name":"Josh Gottheimer","holdings":[{"ticker":"NTRA","weight":0.0770366444579043},{"ticker":"MTHRY","weight":0.07699878861296185},{"ticker":"CVLT","weight":0.07699878861296185},{"ticker":"TNDM","weight":0.07699878861296185},{"ticker":"AVGO","weight":0.07688522107813446},{"ticker":"NVDA","weight":0.07688522107813446},{"ticker":"CVNA","weight":0.07688522107813446},{"ticker":"NET","weight":0.07688522107813446},{"ticker":"INSM","weight":0.07688522107813446},{"ticker":"CB","weight":0.07688522107813446},{"ticker":"APP","weight":0.07684736523319201},{"ticker":"ABBV","weight":0.07684736523319201},{"ticker":"ASML","weight":0.07684736523319201},{"ticker":"IRT","weight":7.571168988491823e-05},{"ticker":"SSMXY","weight":3.7855844942459115e-05}]},{"name":"Kevin Hern","holdings":[{"ticker":"XOM","weight":0.18761350694123805},{"ticker":"HD","weight":0.06254809616154154},{"ticker":"CB","weight":0.06251731461815495},{"ticker":"INRE","weight":0.06251731461815495},{"ticker":"LMT","weight":0.06248653307476837},{"ticker":"UNH","weight":0.06248653307476837},{"ticker":"WMB","weight":0.06248653307476837},{"ticker":"LIN","weight":0.06248653307476837},{"ticker":"NEE","weight":0.06248653307476837},{"ticker":"RTX","weight":0.06248653307476837},{"ticker":"EMR","weight":0.06248653307476837},{"ticker":"ROK","weight":0.06248653307476837},{"ticker":"GS","weight":0.06245575153138178},{"ticker":"BNPQY","weight":0.06245575153138178}]}];
  const palette = ['#0021A5','#FA4616','#0077c0','#22884C','#D50A0A','#FCD006','#4B2A91','#6B21A8','#0EA5E9','#FF7900','#A855F7','#CA8A04','#34302B','#B1BABf'];
  const MAX_HOLDINGS = null; // show all
  const ANGLE_OFFSET = Math.PI/2;

  function pctText(n){ if(!isFinite(n)) return '—'; const p=n*100; return (p<0.1&&p>0)?'<0.1%':p.toFixed(2)+'%'; }

  function drawMiniDonut(el, items){

    const w=120,h=120,cx=60,cy=60,r=44;
    const NS='http://www.w3.org/2000/svg';
    const svg=document.createElementNS(NS,'svg'); svg.setAttribute('viewBox','0 0 '+w+' '+h); svg.setAttribute('width', w); svg.setAttribute('height', h);
    let start=0;
    items.forEach((x,i)=>{
      const frac=Math.max(0,x.weight||0);
      const end=start+frac*2*Math.PI;
      const large=(end-start)>Math.PI?1:0;
      const sA=start+ANGLE_OFFSET, eA=end+ANGLE_OFFSET;
      const x1=cx+r*Math.cos(sA), y1=cy+r*Math.sin(sA);
      const x2=cx+r*Math.cos(eA), y2=cy+r*Math.sin(eA);
      const p=document.createElementNS(NS,'path');
      p.setAttribute('d','M '+cx+' '+cy+' L '+x1+' '+y1+' A '+r+' '+r+' 0 '+large+' 1 '+x2+' '+y2+' Z');
      p.setAttribute('fill', palette[i%palette.length]);
      svg.appendChild(p);
      start=end;
    
    // add donut inner circle like portfolios.html
    const hole = document.createElementNS(svgNS,'circle');
    hole.setAttribute('cx', cx);
    hole.setAttribute('cy', cy);
    hole.setAttribute('r', String(Math.round(r*0.58)));
    try{
      const card = getComputedStyle(document.documentElement).getPropertyValue('--card').trim() || '#11161d';
      const border = getComputedStyle(document.documentElement).getPropertyValue('--border').trim() || '#223142';
      hole.setAttribute('fill', card);
      hole.setAttribute('stroke', border);
      hole.setAttribute('stroke-width', '1');
    }catch(e){
      hole.setAttribute('fill', '#11161d');
      hole.setAttribute('stroke', '#223142');
      hole.setAttribute('stroke-width', '1');
    }
    svg.appendChild(hole);

});
    el.innerHTML=''; el.appendChild(svg);
  }

  function buildMiniCard(sec){
    const box=document.createElement('div'); box.className='mini-card';
    const pie=document.createElement('div'); pie.className='mini-pie';
    const legend=document.createElement('div'); legend.className='mini-legend';
    const title=document.createElement('div'); title.className='mini-title'; title.textContent=sec.name || 'Portfolio';
    legend.appendChild(title);
    const items=(sec.holdings||[]);
    drawMiniDonut(pie, items);
    items.forEach((x,i)=>{
      const row=document.createElement('div'); row.className='row';
      const sw=document.createElement('span'); sw.className='sw'; sw.style.background=palette[i%palette.length];
      const label=document.createElement('span'); label.innerHTML=(x.ticker||'?')+' — '+pctText(x.weight);
      row.appendChild(sw); row.appendChild(label); legend.appendChild(row);
    });
    box.appendChild(pie); box.appendChild(legend);
    return box;
  }

  // Render immediately (script is at end of body so DOM exists)
  (function render(){
    const host = document.getElementById('mini-portfolios');
    if(!host) return;
    host.innerHTML='';
    (SECTIONS || []).forEach(sec => host.appendChild(buildMiniCard(sec)));
  })();

  // Make the entire card clickable to portfolios.html (preserve link clicks)
  (function bindClick(){
    const heading = Array.from(document.querySelectorAll('h1,h2,h3,div.section-title'))
      .find(h => /High Profile Portfolios/i.test(h.textContent||''));
    const card = heading ? heading.closest('section') : null;
    if(!card) return;
    card.classList.add('portfolios-card');
    card.addEventListener('click', (e)=>{
      const a = e.target.closest && e.target.closest('a');
      if(a) return;
      window.location.href='portfolios.html';
    });
  })();
})();
</script>

<script>
// NEW: Today's Gap-Ups mini candlesticks (14 trading days)
(function(){
  const DATA = (function(){ try { return [{"symbol":"WGO","series":[{"d":"2025-10-03","o":34.29999923706055,"h":35.099998474121094,"l":34.29999923706055,"c":34.79999923706055},{"d":"2025-10-06","o":34.84000015258789,"h":34.84000015258789,"l":32.849998474121094,"c":32.869998931884766},{"d":"2025-10-07","o":32.81999969482422,"h":33.25,"l":31.899999618530273,"c":32.11000061035156},{"d":"2025-10-08","o":32.11000061035156,"h":32.5099983215332,"l":31.899999618530273,"c":32.130001068115234},{"d":"2025-10-09","o":31.899999618530273,"h":31.940000534057617,"l":31.15999984741211,"c":31.290000915527344},{"d":"2025-10-10","o":31.639999389648438,"h":31.639999389648438,"l":29.649999618530273,"c":29.65999984741211},{"d":"2025-10-13","o":30.06999969482422,"h":30.34000015258789,"l":29.68000030517578,"c":29.860000610351562},{"d":"2025-10-14","o":29.350000381469727,"h":31.010000228881836,"l":29.239999771118164,"c":30.75},{"d":"2025-10-15","o":30.889999389648438,"h":31.18000030517578,"l":29.709999084472656,"c":30.1200008392334},{"d":"2025-10-16","o":30.15999984741211,"h":30.229999542236328,"l":29.549999237060547,"c":29.979999542236328},{"d":"2025-10-17","o":29.889999389648438,"h":30.350000381469727,"l":29.6299991607666,"c":30.059999465942383},{"d":"2025-10-20","o":30.420000076293945,"h":30.809999465942383,"l":29.979999542236328,"c":30.510000228881836},{"d":"2025-10-21","o":30.639999389648438,"h":31.739999771118164,"l":30.34000015258789,"c":31.6200008392334},{"d":"2025-10-22","o":36.310001373291016,"h":40.849998474121094,"l":36.029998779296875,"c":40.63999938964844}],"streak":1}]; } catch(e){ return []; } })();
  const host = document.getElementById('gapups-today');
  if(!host || !DATA || !DATA.length) return;

  function drawCandle(ctx, x, w, yOpen, yClose, yHigh, yLow, up){
    // wick
    ctx.beginPath();
    ctx.moveTo(x, yHigh); ctx.lineTo(x, yLow);
    ctx.strokeStyle = up ? '#16a34a' : '#dc2626';
    ctx.lineWidth = 1; ctx.stroke();
    // body
    const left = x - w/2, h = Math.max(1, Math.abs(yClose - yOpen));
    const top = Math.min(yOpen, yClose);
    ctx.fillStyle = up ? '#16a34a' : '#dc2626';
    ctx.fillRect(left, top, w, h);
  }
  function fmtDate(iso){
    // show as M/D
    const d = new Date(iso + 'T00:00:00');
    if(!isFinite(d)) return iso;
    return (d.getMonth()+1) + '/' + d.getDate();
  }
  function drawChart(canvas, series){
    const dpr = window.devicePixelRatio || 1;
    const H = 140, W = canvas.clientWidth || 260;
    canvas.width = Math.floor(W * dpr);
    canvas.height = Math.floor(H * dpr);
    const ctx = canvas.getContext('2d'); ctx.setTransform(dpr,0,0,dpr,0,0);

    const padL=34, padR=6, padT=8, padB=20;
    const plotW=W - padL - padR, plotH=H - padT - padB;
    let lo=Infinity, hi=-Infinity;
    series.forEach(s=>{ lo=Math.min(lo,s.l); hi=Math.max(hi,s.h); });
    if(!(isFinite(lo)&&isFinite(hi)) || hi<=lo){ lo=0; hi=1; }

    const n = series.length;
    const toX = i => padL + (i+0.5)*(plotW/n);
    const toY = v => padT + (hi - v) * (plotH/(hi-lo));

    // light grid
    ctx.strokeStyle='rgba(255,255,255,.07)'; ctx.lineWidth=1;
    [0.25,0.5,0.75].forEach(fr=>{
      const y=padT + fr*plotH; ctx.beginPath(); ctx.moveTo(padL,y); ctx.lineTo(padL+plotW,y); ctx.stroke();
    });
    // axes (y left, x bottom) + labels
    const cs = getComputedStyle(document.documentElement);
    const muted = cs.getPropertyValue('--muted').trim() || '#8ea0b3';
    const border = cs.getPropertyValue('--border').trim() || '#223142';

    ctx.strokeStyle = border; ctx.lineWidth = 1;
    // y-axis
    ctx.beginPath(); ctx.moveTo(padL, padT); ctx.lineTo(padL, padT+plotH); ctx.stroke();
    // x-axis
    ctx.beginPath(); ctx.moveTo(padL, padT+plotH); ctx.lineTo(padL+plotW, padT+plotH); ctx.stroke();

    // y labels: hi / mid / lo
    ctx.fillStyle = muted; ctx.font = '10px system-ui, -apple-system, Segoe UI, Roboto, Arial';
    ctx.textBaseline = 'middle';
    const midV = (hi + lo) / 2;
    [[hi, padT],[midV, padT+plotH/2],[lo, padT+plotH]].forEach(([v,y])=>{
      const txt = Number(v).toFixed(2);
      ctx.fillText(String(txt), 4, y);
    });

    // x labels: first / middle / last dates
    ctx.textBaseline = 'top';
    const nn = series.length;
    const first = series[0]?.d, last = series[nn-1]?.d, mid = series[Math.floor(nn/2)]?.d;
    if(first){ ctx.fillText(fmtDate(first), padL, padT+plotH+4); }
    if(mid){ const x = padL + plotW/2; const t = fmtDate(mid); ctx.fillText(t, x-ctx.measureText(t).width/2, padT+plotH+4); }
    if(last){ const t = fmtDate(last); const x = padL+plotW - ctx.measureText(t).width; ctx.fillText(t, x, padT+plotH+4); }

    // candles
    const barW = Math.max(3, Math.min(12, (plotW/n)*0.6));
    series.forEach((s,i)=>{
      drawCandle(ctx, toX(i), barW, toY(s.o), toY(s.c), toY(s.h), toY(s.l), s.c>=s.o);
    });
  }

  function card(item){
    const el = document.createElement('div'); el.className='gap-card';
    const head = document.createElement('div'); head.className='gap-head';
    const sym = document.createElement('div'); sym.className='gap-sym'; sym.textContent=item.symbol;
    head.appendChild(sym);

    let last = null, prev = null;
    if (item.series && item.series.length){
      last = item.series[item.series.length-1];
      if (item.series.length > 1) prev = item.series[item.series.length-2];
    }
    const priceVal = (last && isFinite(last.c)) ? last.c : null;
    const chg = (priceVal!=null && prev && isFinite(prev.c)) ? (priceVal - prev.c) : 0;

    const price = document.createElement('div');
    price.className = 'gap-price ' + (chg >= 0 ? 'up' : 'down');
    price.textContent = (priceVal!=null) ? ('$' + priceVal.toFixed(2)) : '—';

    // Right-side wrap so price + streak sit together
    const right = document.createElement('div');
    right.style.display = 'flex';
    right.style.alignItems = 'center';
    right.appendChild(price);

    // Only show streak if > 1
    const streakNum = Number(item.streak || 0);
    if (streakNum > 1) {
      const st = document.createElement('span');
      st.className = 'gap-streak';
      st.title = 'Consecutive days on the gap-up list';
      st.textContent = `${streakNum}d`;
      right.appendChild(st);
    }

    head.appendChild(right);

    const c = document.createElement('canvas'); c.className='gap-canvas';
    el.appendChild(head); el.appendChild(c);
    // draw after layout
    requestAnimationFrame(()=> drawChart(c, item.series));
    window.addEventListener('resize', ()=> drawChart(c, item.series));
    return el;
  }

  host.innerHTML='';
  DATA.forEach(it => host.appendChild(card(it)));
})();
</script>

<script>
// overview-icons-and-donuts-init (kept as-is)
(function(){
  const ICONS = {
    bots: '<span class="title-ico" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="#9ecbff" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="8" width="18" height="10" rx="2"/><circle cx="8.5" cy="13" r="1.5"/><circle cx="15.5" cy="13" r="1.5"/><path d="M12 8V4"/><path d="M10 4h4"/></svg></span>',
    portfolios: '<span class="title-ico" aria-hidden="true"><svg viewBox="0 0 24 24" fill="#a7f3d0"><path d="M12 2c2.75 0 5 2.25 5 5s-2.25 5-5 5-5-2.25-5-5 2.25-5 5-5Zm-7 18c0-3.6 5.2-5.5 7-5.5s7 1.9 7 5.5v1H5v-1Z"/></svg></span>',
    market: '<span class="title-ico" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M7 15l4-4 3 3 4-6"/></svg></span>'
  };
  function prependIcon(titleRegex, svg){
    const el = Array.from(document.querySelectorAll('.section-title'))
      .find(x => titleRegex.test((x.textContent||'').trim()));
    if(!el) return;
    if(!el.querySelector('.title-ico')){
      el.insertAdjacentHTML('afterbegin', svg);
    }
  }
  prependIcon(/\bBots\b/i, ICONS.bots);
  prependIcon(/High Profile Portfolios/i, ICONS.portfolios);
  prependIcon(/Market (Studies|Analysis)/i, ICONS.market);

  // Also ensure mini donuts are present + click-through (this mirrors your earlier script)
  const SECTIONS = (function(){ try { return [{"name":"Nancy Pelosi","holdings":[{"ticker":"NVDA","weight":0.26695374905492913},{"ticker":"PANW","weight":0.20012491371092336},{"ticker":"AAPL","weight":0.19963183327306794},{"ticker":"AVGO","weight":0.13349331054205976},{"ticker":"AMZN","weight":0.06659873113967325},{"ticker":"TEM","weight":0.06659873113967325},{"ticker":"VST","weight":0.06659873113967325}]},{"name":"Tommy Tuberville","holdings":[{"ticker":"ARKK","weight":0.4998152481832738},{"ticker":"ABNDX","weight":0.2502771277250893},{"ticker":"XBI","weight":0.2499076240916369}]},{"name":"Michael McCaul","holdings":[{"ticker":"FFRHX","weight":0.2222222222222222},{"ticker":"LDNXF","weight":0.08333333333333333},{"ticker":"VTEB","weight":0.05555555555555555},{"ticker":"DHR","weight":0.05555555555555555},{"ticker":"NSIT","weight":0.05555555555555555},{"ticker":"ATR","weight":0.05555555555555555},{"ticker":"AVGO","weight":0.05555555555555555},{"ticker":"WDAY","weight":0.05555555555555555},{"ticker":"ARTFX","weight":0.027777777777777776},{"ticker":"NOW","weight":0.027777777777777776},{"ticker":"CNM","weight":0.027777777777777776},{"ticker":"CSL","weight":0.027777777777777776},{"ticker":"PRI","weight":0.027777777777777776},{"ticker":"WTM","weight":0.027777777777777776},{"ticker":"MSA","weight":0.027777777777777776},{"ticker":"DXCM","weight":0.027777777777777776},{"ticker":"NFLX","weight":0.027777777777777776},{"ticker":"HWM","weight":0.027777777777777776},{"ticker":"PLXS","weight":0.027777777777777776},{"ticker":"ORCL","weight":0.027777777777777776},{"ticker":"GOOGL","weight":0.027777777777777776}]},{"name":"Josh Gottheimer","holdings":[{"ticker":"NTRA","weight":0.0770366444579043},{"ticker":"MTHRY","weight":0.07699878861296185},{"ticker":"CVLT","weight":0.07699878861296185},{"ticker":"TNDM","weight":0.07699878861296185},{"ticker":"AVGO","weight":0.07688522107813446},{"ticker":"NVDA","weight":0.07688522107813446},{"ticker":"CVNA","weight":0.07688522107813446},{"ticker":"NET","weight":0.07688522107813446},{"ticker":"INSM","weight":0.07688522107813446},{"ticker":"CB","weight":0.07688522107813446},{"ticker":"APP","weight":0.07684736523319201},{"ticker":"ABBV","weight":0.07684736523319201},{"ticker":"ASML","weight":0.07684736523319201},{"ticker":"IRT","weight":7.571168988491823e-05},{"ticker":"SSMXY","weight":3.7855844942459115e-05}]},{"name":"Kevin Hern","holdings":[{"ticker":"XOM","weight":0.18761350694123805},{"ticker":"HD","weight":0.06254809616154154},{"ticker":"CB","weight":0.06251731461815495},{"ticker":"INRE","weight":0.06251731461815495},{"ticker":"LMT","weight":0.06248653307476837},{"ticker":"UNH","weight":0.06248653307476837},{"ticker":"WMB","weight":0.06248653307476837},{"ticker":"LIN","weight":0.06248653307476837},{"ticker":"NEE","weight":0.06248653307476837},{"ticker":"RTX","weight":0.06248653307476837},{"ticker":"EMR","weight":0.06248653307476837},{"ticker":"ROK","weight":0.06248653307476837},{"ticker":"GS","weight":0.06245575153138178},{"ticker":"BNPQY","weight":0.06245575153138178}]}]; } catch(e){ return []; } })();
  function pctText(n){ if(!isFinite(n)) return '—'; const p = n*100; return (p<0.1&&p>0)?'<0.1%':p.toFixed(2)+'%'; }
  function ensureMiniHost(){
    const heading = Array.from(document.querySelectorAll('.section-title'))
      .find(h => /High Profile Portfolios/i.test((h.textContent||'')));
    if(!heading) return null;
    const card = heading.closest('section') || heading.parentElement;
    if(!card) return null;
    card.classList.add('portfolios-card');
    let host = card.querySelector('#mini-portfolios');
    if(!host){
      host = document.createElement('div');
      host.className = 'mini-grid';
      host.id = 'mini-portfolios';
      heading.insertAdjacentElement('afterend', host);
    }
    return {card,host};
  }
  function drawMiniDonut(el, items){
    const w=120,h=120,cx=60,cy=60,r=44, ANGLE_OFFSET=Math.PI/2;
    const NS='http://www.w3.org/2000/svg';
    const svg=document.createElementNS(NS,'svg'); svg.setAttribute('viewBox','0 0 '+w+' '+h); svg.setAttribute('width', w); svg.setAttribute('height', h);
    let start=0;
    const pal=['#0021A5','#FA4616','#0077c0','#22884C','#D50A0A','#FCD006','#4B2A91','#6B21A8','#0EA5E9','#FF7900','#A855F7','#CA8A04','#34302B','#B1BABf'];
    (items||[]).forEach((x,i)=>{
      const frac=Math.max(0,x.weight||0);
      const end=start+frac*2*Math.PI;
      const large=(end-start)>Math.PI?1:0;
      const sA=start+ANGLE_OFFSET, eA=end+ANGLE_OFFSET;
      const x1=cx+r*Math.cos(sA), y1=cy+r*Math.sin(sA);
      const x2=cx+r*Math.cos(eA), y2=cy+r*Math.sin(eA);
      const p=document.createElementNS(NS,'path');
      p.setAttribute('d','M '+cx+' '+cy+' L '+x1+' '+y1+' A '+r+' '+r+' 0 '+large+' 1 '+x2+' '+y2+' Z');
      p.setAttribute('fill', pal[i%pal.length]);
      svg.appendChild(p);
      start=end;
    });
    const hole=document.createElementNS(NS,'circle');
    hole.setAttribute('cx', cx); hole.setAttribute('cy', cy);
    hole.setAttribute('r', String(Math.round(r*0.58)));
    try{
      const cs = getComputedStyle(document.documentElement);
      const fill = cs.getPropertyValue('--card').trim() || '#11161d';
      const stroke = cs.getPropertyValue('--border').trim() || '#223142';
      hole.setAttribute('fill', fill);
      hole.setAttribute('stroke', stroke);
      hole.setAttribute('stroke-width', '1');
    }catch(e){
      hole.setAttribute('fill', '#11161d');
      hole.setAttribute('stroke', '#223142');
      hole.setAttribute('stroke-width', '1');
    }
    svg.appendChild(hole);
    el.innerHTML=''; el.appendChild(svg);
  }
  function buildMini(sec){
    const pal=['#0021A5','#FA4616','#0077c0','#22884C','#D50A0A','#FCD006','#4B2A91','#6B21A8','#0EA5E9','#FF7900','#A855F7','#CA8A04','#34302B','#B1BABf'];
    const box=document.createElement('div'); box.className='mini-card';
    const pie=document.createElement('div'); pie.className='mini-pie';
    const legend=document.createElement('div'); legend.className='mini-legend';
    const title=document.createElement('div'); title.className='mini-title'; title.textContent=sec.name||'Portfolio';
    legend.appendChild(title);
    const items=(sec.holdings||[]);
    drawMiniDonut(pie, items);
    items.forEach((x,i)=>{
      const row=document.createElement('div'); row.className='row';
      const sw=document.createElement('span'); sw.className='sw'; sw.style.background=pal[i%pal.length];
      const label=document.createElement('span'); label.innerHTML=(x.ticker||'?')+' — '+pctText(x.weight);
      row.appendChild(sw); row.appendChild(label); legend.appendChild(row);
    });
    box.appendChild(pie); box.appendChild(legend);
    return box;
  }
  (function render(){
    const ctx = ensureMiniHost();
    if(!ctx) return;
    const {card,host} = ctx;
    host.innerHTML='';
    (SECTIONS||[]).forEach(sec => host.appendChild(buildMini(sec)));
    card.addEventListener('click', (e)=>{
      const a = e.target.closest && e.target.closest('a'); if(a) return;
      window.location.href = 'portfolios.html';
    });
  })();
})();
</script>
<script>
(function(){
  const DATA = (function(){ try { return [{"symbol":"AEP","date":"2025-10-21","entry_price":117.43000030517578,"current_price":117.2699966430664,"pnl_float":-0.0013625450199570288,"pnl_text":"-0.14%","gap_ups":"0","info":"Traded by Rick Larsen who sits on committee that oversees funding for enery infrastructure","logo_url":"https://logo.clearbit.com/www.aep.com"},{"symbol":"HOOD","date":"2025-10-15","entry_price":134.14999389648438,"current_price":127.22000122070312,"pnl_float":-0.05165853888244465,"pnl_text":"-5.17%","gap_ups":"0","info":"Traded by John Jackson","logo_url":"https://logo.clearbit.com/robinhood.com"},{"symbol":"IDXX","date":"2025-10-8","entry_price":629.9099731445312,"current_price":633.780029296875,"pnl_float":0.006143824224633665,"pnl_text":"0.61%","gap_ups":"0","info":"Traded by 5 politicians","logo_url":"https://logo.clearbit.com/www.idexx.com"},{"symbol":"UNH","date":"2025-10-2","entry_price":353.7200012207031,"current_price":361.489990234375,"pnl_float":0.0219664960614534,"pnl_text":"2.20%","gap_ups":"0","info":"Traded by Mark Wayne Mullin who sits on committee of health","logo_url":"https://logo.clearbit.com/www.unitedhealthgroup.com"},{"symbol":"BBAI","date":"2025-9-15","entry_price":5.090000152587891,"current_price":6.610000133514404,"pnl_float":0.2986247417210204,"pnl_text":"29.86%","gap_ups":"1","info":"Traded by Lisa McClain","logo_url":"https://logo.clearbit.com/bigbear.ai"},{"symbol":"SSYS","date":"2025-8-19","entry_price":10.609999656677246,"current_price":11.300000190734863,"pnl_float":0.065033040187082,"pnl_text":"6.50%","gap_ups":"0","info":"Traded by Debbie Schultz who sits on military subcommittee","logo_url":"https://logo.clearbit.com/www.stratasys.com"},{"symbol":"IREN","date":"2025-7-11","entry_price":16.229999542236328,"current_price":51.83000183105469,"pnl_float":2.1934690876715233,"pnl_text":"219.35%","gap_ups":"2","info":"Traded by Cleo Fields who sits on committee that oversees funding for enery infrastructure","logo_url":"https://logo.clearbit.com/iren.com"},{"symbol":"PANW","date":"2024-12-20","entry_price":186.77999877929688,"current_price":212.4199981689453,"pnl_float":0.1372737956805814,"pnl_text":"13.73%","gap_ups":"0","info":"Traded by Pelosi","logo_url":"https://logo.clearbit.com/www.paloaltonetworks.com"},{"symbol":"VSAT","date":"2024-11-20","entry_price":6.929999828338623,"current_price":34.58000183105469,"pnl_float":3.9898993777240523,"pnl_text":"398.99%","gap_ups":"1","info":"Traded by Debbie Schultz who sits on military subcommittee","logo_url":"https://logo.clearbit.com/www.viasat.com"},{"symbol":"NVDA","date":"2024-06-26","entry_price":126.4000015258789,"current_price":180.27999877929688,"pnl_float":0.42626579590971514,"pnl_text":"42.63%","gap_ups":"0","info":"Traded by Pelosi","logo_url":"https://logo.clearbit.com/www.nvidia.com"},{"symbol":"AVGO","date":"2024-06-26","entry_price":159.1999969482422,"current_price":340.29998779296875,"pnl_float":1.1375627783686726,"pnl_text":"113.76%","gap_ups":"0","info":"Traded by Pelosi","logo_url":"https://logo.clearbit.com/www.broadcom.com"}]; } catch(e){ return []; } })();
  if(!DATA || !DATA.length) return;

  function buildHpCard(){
    const card = document.createElement('div'); card.className='hpmini-card';
    const title = document.createElement('div'); title.className='hpmini-title'; title.textContent='High-Profile Stocks';
    const wrap = document.createElement('div'); wrap.className='hpmini-wrap';
    wrap.innerHTML = `<table>
      <thead><tr><th>Symbol</th><th>Date</th><th>Entry</th><th>Now</th><th>PNL</th><th>Gap Ups</th><th>Info</th></tr></thead>
      <tbody>
        ${DATA.map(r=>{
          const ep = (r.entry_price!=null)?('$'+Number(r.entry_price).toFixed(2)):'—';
          const cp = (r.current_price!=null)?('$'+Number(r.current_price).toFixed(2)):'—';
          const logo = r.logo_url ? `<img src="${r.logo_url}" style="width:14px;height:14px;border-radius:50%;vertical-align:-2px;margin-right:6px">` : '';
          const pnl = (r.pnl_float!=null)?`<span class="${r.pnl_float>=0?'hpmini-pct up':'hpmini-pct down'}">${(r.pnl_float*100).toFixed(2)}%</span>`:'—';
          return `<tr>
            <td>${logo}<strong>${r.symbol||'?'}</strong></td>
            <td>${r.date||''}</td>
            <td>${ep}</td>
            <td>${cp}</td>
            <td>${pnl}</td>
            <td>${r.gap_ups||''}</td>
            <td>${r.info||''}</td>
          </tr>`;
        }).join('')}
      </tbody>
    </table>`;
    card.appendChild(title); card.appendChild(wrap);
    return card;
  }

  const host = document.getElementById('mini-portfolios');
  if (host) { host.prepend(buildHpCard()); }
})();
</script>

</body>
</html>